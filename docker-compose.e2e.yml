# Docker Compose configuration for E2E testing
# This file should be used with .env.e2e for environment-specific configuration
#
# Recommended usage:
#   1. Copy .env.e2e.example to .env.e2e
#   2. Run: docker-compose -f docker-compose.yml -f docker-compose.override.yml \
#           -f docker-compose.tmpfs.yml --env-file .env.e2e up
#
# Or use standard commands with .env.e2e as your active .env file:
#   1. cp .env.e2e .env
#   2. docker-compose up
#
# The .env.e2e file should contain:
#   COMPOSE_PROJECT_NAME=sandbox-e2e
#   PORT_OFFSET=1
#   DB_PERSISTENCE_MODE=tmpfs
#
# This approach:
# - Uses the same base configuration as development
# - Isolates E2E environment with unique project name
# - Uses PORT_OFFSET=1 for different ports (3001, 8081, 5433, etc.)
# - Uses tmpfs for faster testing and automatic cleanup

# No service definitions needed here - use base docker-compose.yml
# All customization is done via .env.e2e file

# Note: If you need E2E-specific overrides (beyond what .env.e2e provides),
# add them below. For example:

services:
  backend:
    environment:
      # E2E-specific Spring configuration
      SPRING_FLYWAY_ENABLED: "true"
    healthcheck:
      # More retries for E2E stability
      retries: 10
      start_period: 30s

  frontend:
    build:
      target: production  # Ensure production build for E2E tests
